<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>University - Health & Safety Dashboard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;min-height:100vh;color:#333;font-size:15px}
.container{max-width:1200px;margin:0 auto;padding:20px}
.header{text-align:center;color:#1e293b;margin-bottom:30px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:40px;border-radius:20px;box-shadow:0 8px 32px rgba(0,0,0,0.12);position:relative;overflow:hidden}
.header::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,rgba(255,255,255,0.1) 0%,transparent 50%,rgba(255,255,255,0.05) 100%);pointer-events:none}
.header h1{font-size:2.3rem;margin-bottom:10px;font-weight:800;color:white;text-shadow:0 2px 4px rgba(0,0,0,0.1);position:relative;z-index:1}
.header p{color:rgba(255,255,255,0.9);font-size:1rem;font-weight:500;position:relative;z-index:1}
.kpi-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:30px}
.kpi-card{background:white;border-radius:8px;padding:8px 12px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;position:relative;overflow:hidden;display:grid;grid-template-columns:7fr 3fr auto;column-gap:12px;align-items:center}
.kpi-card::before{content:'';position:absolute;top:0;left:0;right:0;height:4px}
.kpi-title{font-size:14px;font-weight:600;color:#374151;line-height:1.3;display:flex;align-items:center;margin:0}
.kpi-value{font-size:14px;font-weight:700;color:white;padding:6px 10px;border-radius:6px;text-align:center;box-shadow:0 4px 16px rgba(0,0,0,0.15);margin:0;display:inline-flex;align-items:center;justify-self:center;min-height:28px}
.tooltip-trigger{display:inline-flex;align-items:center;cursor:help;margin-left:6px;font-size:14px;color:#6b7280;transition:color 0.2s ease}
.tooltip-trigger:hover{color:#3b82f6}
.tooltip-content{visibility:hidden;opacity:0;position:fixed;z-index:9999;background-color:#1f2937;color:white;padding:12px 14px;border-radius:8px;font-size:14px;line-height:1.4;max-width:320px;width:max-content;box-shadow:0 10px 25px rgba(0,0,0,0.3);transition:opacity 0.2s,visibility 0.2s;pointer-events:none}
.performance-excellent{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 4px 15px rgba(16,185,129,0.3)}
.performance-good{background:linear-gradient(135deg,#3b82f6,#1d4ed8);box-shadow:0 4px 15px rgba(59,130,246,0.3)}
.performance-warning{background:linear-gradient(135deg,#f59e0b,#d97706);box-shadow:0 4px 15px rgba(245,158,11,0.3)}
.performance-poor{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 4px 15px rgba(239,68,68,0.3)}
.performance-no-data{background:linear-gradient(135deg,#6b7280,#4b5563);box-shadow:0 4px 15px rgba(107,114,128,0.2)}
@media (max-width:1200px){.kpi-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:768px){.kpi-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>University - Health & Safety Dashboard</h1>
      <p>Overall KPI performance across the University</p>
    </div>

    <div class="kpi-grid compressed-view">
      <!-- KPI Cards inserted here -->
      <div class="kpi-card">
                <div class="kpi-title">Assets without A&B Defects
                    <span class="tooltip-trigger" data-kpi="Assets without A&B Defects" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-excellent">96.8% (3435)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Assets Inspected by Allianz
                    <span class="tooltip-trigger" data-kpi="Assets Inspected by Allianz" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-excellent">96.8% (3435)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Training Matrix Coverage
                    <span class="tooltip-trigger" data-kpi="Training Matrix Coverage" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-excellent">94.0%</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Leadership Walkarounds
                    <span class="tooltip-trigger" data-kpi="Leadership Walkarounds" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-excellent">92.9% (56)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Fire Training Completion
                    <span class="tooltip-trigger" data-kpi="Fire Training Completion" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">89.7% (7095)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">PEEPS in Place
                    <span class="tooltip-trigger" data-kpi="PEEPS in Place" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">89.2% (37)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Written Arrangements Complete
                    <span class="tooltip-trigger" data-kpi="Written Arrangements Complete" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">85.3% (645)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Risk Assessment Coverage
                    <span class="tooltip-trigger" data-kpi="Risk Assessment Coverage" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">82.3%</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Accidents and Incidents Investigated
                    <span class="tooltip-trigger" data-kpi="Accidents and Incidents Investigated" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">80.5% (401)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">H&S Induction Completion
                    <span class="tooltip-trigger" data-kpi="H&S Induction Completion" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">80.5% (7095)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Fire Drills Completed
                    <span class="tooltip-trigger" data-kpi="Fire Drills Completed" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-good">80.0% (95)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Risk Assessments in Register up to date
                    <span class="tooltip-trigger" data-kpi="Risk Assessments in Register up to date" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-warning">71.5% (3701)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Staff Training Requirements
                    <span class="tooltip-trigger" data-kpi="Staff Training Requirements" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-warning">66.5% (7095)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">Inspections Carried Out
                    <span class="tooltip-trigger" data-kpi="Inspections Carried Out" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-warning">51.6% (19076)</span>
                <span style="height:1px"></span>
            </div>
<div class="kpi-card">
                <div class="kpi-title">PEEPS Drilled
                    <span class="tooltip-trigger" data-kpi="PEEPS Drilled" title="Info" onmouseenter="handleTooltipShow(event)" onmouseleave="handleTooltipHide()">&#9432;</span>
                </div>
                <span class="kpi-value performance-poor">40.5% (37)</span>
                <span style="height:1px"></span>
            </div>
    </div>
  </div>

  <div id="tooltip" class="tooltip-content"></div>
  <script>
    const tooltipData = {
  "Written Arrangements Complete": "Written Arrangements determine how a department is enacting a specific University Policy. Where a policy determines what a department must do, the arrangements indicate how a department achieves this. This value indicates how many arrangements a department has, alongside the percentage of these which are approved by the local H&S Committee and are in-date/reviewed.",
  "Risk Assessments in Register up to date": "This number provides an indication of the percentage of risk assessments that are both on the departmental risk assessment register, AND are reviewed/up-to-date.\n\nPlease review the number of assessments provided alongside the % reviewed, as the number will provide an indication on whether the coverage across the department is high enough.",
  "H&S Induction Completion": "This number is calculated by comparing the  number of staff (from the UniCore records) who have completed the mandatory Health and Safety Induction course against the number of staff within the Department.\nNote that training data is provided by the H&S Dept, but Departments were asked to request their staff numbers through a UniCore report as the H&S Dept cannot procure this data.",
  "Fire Training Completion": "This number is calculated by comparing the  number of staff (from the UniCore records) who have completed the mandatory Fire Training course against the number of staff within the Department.\nNote that training data is provided by the H&S Dept, but Departments were asked to request their staff numbers through a UniCore report as the H&S Dept cannot procure this data.",
  "Fire Drills Completed": "This is calculated by comparing the number of buildings that were due to have a Fire Drill within the reporting period against the number of drills carried out.\n\nThe number provided alongside the percentage should be roughly half the number of buildings each department is responsible for.",
  "PEEPS in Place": "This value provides an indication of how many PEEPS have both been identified as required and are implemented. These should have been reviewed in good time and have appropriate controls in place to mitigate the risks related to the evacuation of the PEEPs holders.",
  "PEEPS Drilled": "This value provides an indication of how many of the identified PEEPS have been tested to ensure that, upon execution, the affected person can be successfully evacuated,",
  "Assets without A&B Defects": "This return provides an indication of the % of Assets that have been assessed by Allianz as not having a defect that requires action to remediate, where an \"A\" defect corresponds to one that poses a serious hazard, and a \"B\" defect requires action, but not immediately.",
  "Assets Inspected by Allianz": "This return provides an indication of how many assets the department has on the Allianz database compared to how many have been inspected within the time frame in which they were due an inspection.\n\nNote that this return does not include assets outside of the Allianz database, including items such as gas regulators, autoclaves, etc. A system is not currently available at the University to maintain these records.",
  "Accidents and Incidents Investigated": "This return compares the number of Incidents and Near Misses reported in the period alongside the % that have been investigated by the relevant person in the Dept, whether this be the supervisor of the reporting party, or the Health and Safety Assisstants/Coordinators.",
  "Inspections Carried Out": "This return provides an overview of how many Health and Safety Inspections were due to be carried out within the Dept compared to the number actually carried out.\n\nThe return indicates both the number of inspections planned, as well as the number of areas highlighted in the department as requiring inspection. The provided percentage is an indication of how many were successfully carried out against the schedule, but the number schedules should be compared against the number of areas requiring inspection as this will determine whether the number of inspections planned is proportionate against the size of the department",
  "Leadership Walkarounds": "This return provides an overview of the percentage of leadership walkarounds scheduled, vs the number completed.\n\nEach department may expect the number of walkarounds to be roughly 1 per quarter, but this will vary depending on the risk profile of the department.",
  "Risk Assessment Coverage": "This return provides an indication of what the H&S Coordinator believes the coverage of Risk Assessments is across each department.\n\nCurrently, there is no University-wide Risk Assessment Register, so in most cases this figure will be an estimate.\n\nRisk Assessment coverage should reflect the range of hazards within a department (with the RMS module list as a useful starting point), and whether the department believes it has an appropriate number of Risk Assessments in place for each hazard type, taking into account the number of research groups and activities in their buildings.",
  "Training Matrix Coverage": "This return provides an indication of how much of the training identified in the Department's Training Matrix \u2014 which should capture all training requirements based on the activities carried out by each staff member or student \u2014 is currently accessible to those who need it.\n\nTraining accessibility should reflect whether the courses identified in the Matrix are:\n\nAvailable in the required format (e-learning, in-person, or blended),\n\nKept up to date and relevant, and\n\nRealistically accessible to the groups who need them (considering scheduling, prerequisites, and availability of spaces).",
  "Staff Training Requirements": "This return is an indication by the H&S Coordinator of what percentage of Staff they believe have received all training they need in order to be competent to carry out their work. This includes all compulsory training via UniCore, all training via Atlus, as well as any other training highlighted on the training matrix."
};
    let globalTooltip = null;
    function createGlobalTooltip(){
      if(globalTooltip) return;
      globalTooltip = document.getElementById('tooltip');
    }
    function handleTooltipShow(e){
      const trigger = e.currentTarget;
      const key = trigger.getAttribute('data-kpi');
      const text = tooltipData[key] || '';
      showTooltip(trigger, text);
    }
    function handleTooltipHide(){
      if(!globalTooltip) return;
      globalTooltip.style.visibility='hidden';
      globalTooltip.style.opacity='0';
    }
    function showTooltip(trigger, text){
      createGlobalTooltip();
      if(!globalTooltip) return;
      globalTooltip.textContent = text;
      const rect = trigger.getBoundingClientRect();
      const vw = window.innerWidth;
      globalTooltip.style.visibility='visible';
      globalTooltip.style.opacity='0';
      globalTooltip.style.left='0px';
      globalTooltip.style.top='0px';
      const tipRect = globalTooltip.getBoundingClientRect();
      let left = rect.left + (rect.width/2) - (tipRect.width/2);
      let top = rect.top - tipRect.height - 12;
      if(left < 10) left = 10;
      if(left + tipRect.width > vw - 10) left = vw - tipRect.width - 10;
      if(top < 10) top = rect.bottom + 12;
      globalTooltip.style.left = left + 'px';
      globalTooltip.style.top = top + 'px';
      globalTooltip.style.visibility='visible';
      globalTooltip.style.opacity='1';
    }
  </script>
</body>
</html>
